демонстрация - https://drive.google.com/file/d/15XAAW_urv05eTrKv7qgA2pFvTeyg3-FD/view?usp=sharing

# Управление освещением через MQTT

## Введение

Проект реализует **распределённую IoT-систему**, в которой два микроконтроллера обмениваются данными с отдельными ПК по UART/Serial, а ПК взаимодействуют между собой через MQTT. 
---

| Команда | Действие |
|---------|----------|
| `p`     | Одно измерение освещённости |
| `s`     | Потоковая передача данных |


### Actuator MCU

| Команда | Действие |
|---------|----------|
| `u`     | Включить LED |
| `d`     | Выключить LED |

Ответы:

LED_GOES_ON
LED_GOES_OFF


> MCU хранит состояние LED и **не реагирует на повторные команды**, предотвращая лишние действия.

---

## MQTT-топики

| Топик                            | Описание |
|---------------------------------|----------|
| `iot/light/sensor/value`         | Показания фоторезистора |
| `iot/light/actuator/status`      | Состояние LED (ON/OFF) |
| `iot/light/actuator/cmd`         | Команды для LED (не используется напрямую, для расширений) |

---

## Логика работы

1. Sensor MCU считывает данные с фоторезистора и передаёт их на PC1 через UART.
2. PC1 публикует показания в топик `iot/light/sensor/value`.
3. PC2 подписан на этот топик, получает данные и сравнивает их с пороговым значением.
4. Если значение ниже порога, LED включается (`u`), иначе выключается (`d`).
5. При изменении состояния LED PC2 публикует новое состояние в топик `iot/light/actuator/status`.
6. Монитор подписан на все топики и отображает события в реальном времени.

---


